<%- include('partials/head', {
  title: 'Write Review - Feedback',
  bodyClass: 'admin-page user-profile',
  extraHead: `
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="/css/user-common.css">
    <link rel="stylesheet" href="/css/admin-common.css">
    <link rel="stylesheet" href="/css/user-profile.css">
  `
}) %>

<div class="app">
  <%- include("partials/userSidebar", {
    active: "ratings",
    courseCount: undefined
  }) %>

  <main class="main">
    <header class="topbar">
      <div class="crumb">FEEDBACK FORM</div>
      <div class="topbar__pill"><i class="fa-solid fa-message"></i></div>
    </header>

    <section class="profile-hero">
      <div>
        <h1>Write Your Review</h1>
        <p>Share your feedback and help us improve our services.</p>
      </div>
    </section>

    <%- include('partials/flashMessages', { messages }) %>

    <section class="profile-layout">
      <div class="profile-left">
        <div class="profile-card">
          <div class="profile-card__head">
            <div class="profile-card__title">Submit Feedback</div>
            <div class="profile-card__subtitle">Tell us about your experience</div>
          </div>

          <form action="/feedback" method="post" class="profile-form">
            <input type="hidden" name="booking_id" value="<%= typeof selectedBookingId === 'number' ? selectedBookingId : '' %>">

            <div class="profile-field">
              <label for="message">Your Review <span style="color: red;">*</span></label>
              <textarea 
                id="message" 
                name="message" 
                rows="6" 
                placeholder="Share your detailed feedback here..." 
                required
                maxlength="1000"
              ></textarea>
            </div>

            <div class="profile-field">
              <label for="rating">Rating (Optional)</label>
              <select id="rating" name="rating">
                <option value="">-- Select a rating --</option>
                <option value="1">⭐ Poor</option>
                <option value="2">⭐⭐ Fair</option>
                <option value="3">⭐⭐⭐ Good</option>
                <option value="4">⭐⭐⭐⭐ Very Good</option>
                <option value="5">⭐⭐⭐⭐⭐ Excellent</option>
              </select>
            </div>

            <div class="profile-form__actions">
              <button class="btn btn--primary" type="submit">Submit Feedback</button>
              <a href="/profile" class="btn btn--secondary">Cancel</a>
            </div>
          </form>
        </div>
      </div>
    </section>
  </main>
</div>

<%- include('partials/footer') %>

<style>
  .profile-card__title {
    color: var(--accent);
  }

  .profile-form__actions {
    display: flex;
    gap: 1rem;
    margin-top: 2rem;
  }

  .profile-form__actions .btn {
    flex: 1;
  }

  #rating {
    padding: 0.5rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
  }

  #rating:focus {
    outline: none;
    border-color: var(--accent);
    box-shadow: 0 0 0 3px rgba(234, 70, 70, 0.12);
  }

  textarea {
    resize: vertical;
    min-height: 120px;
  }
</style>