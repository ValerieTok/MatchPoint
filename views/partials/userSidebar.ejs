<aside class="sidebar">
  <div class="brand">
    <div class="brand__dot"><i class="fa-solid fa-futbol"></i></div>
    <span class="brand__name">MatchPoint</span>
  </div>

  <nav class="nav">
    <a class="nav__item <%= active === 'profile' ? 'nav__item--active' : '' %>" href="/profile">
      <i class="fa-regular fa-id-card"></i>
      <span>Profile</span>
    </a>

    <a class="nav__item <%= active === 'courses' ? 'nav__item--active' : '' %>" href="/viewcourses">
      <i class="fa-solid fa-book-open"></i>
      <span>Courses</span>
    </a>

    <a class="nav__item <%= active === 'favorites' ? 'nav__item--active' : '' %>" href="/favorites">
      <i class="fa-solid fa-heart"></i>
      <span>Favourites</span>
    </a>

    <a class="nav__item <%= active === 'wallet' ? 'nav__item--active' : '' %>" href="/wallet">
      <i class="fa-solid fa-wallet"></i>
      <span>Wallet</span>
    </a>

    <a class="nav__item <%= active === 'cart' ? 'nav__item--active' : '' %>" href="/bookingCart">
      <i class="fa-solid fa-cart-shopping"></i>
      <span>Cart</span>
    </a>

    <a class="nav__item <%= active === 'dashboard' ? 'nav__item--active' : '' %>" href="/userdashboard">
      <i class="fa-solid fa-chart-line"></i>
      <span>Dashboard</span>
    </a>

    <a class="nav__item <%= active === 'inbox' ? 'nav__item--active' : '' %>" href="/inbox">
      <i class="fa-solid fa-inbox"></i>
      <span>Inbox</span>
    </a>

    <a class="nav__item <%= active === 'ratings' ? 'nav__item--active' : '' %>" href="/ratingsUser">
      <i class="fa-solid fa-star"></i>
      <span>Ratings</span>
    </a>

    <a class="nav__item <%= active === 'security' ? 'nav__item--active' : '' %>" href="/2FASetup">
      <i class="fa-solid fa-shield-halved"></i>
      <span>Security / 2FA</span>
    </a>
  </nav>

  <div class="sidebar__inbox">
    <div class="sidebar__section-title">
      <span>Inbox</span>
      <i class="fa-solid fa-inbox"></i>
    </div>
    <% const inboxRows = Array.isArray(inboxItems) ? inboxItems : []; %>
    <% if (!inboxRows.length) { %>
    <div class="inbox" data-inbox-container="sidebar">
      <div class="inbox__empty">No messages yet.</div>
    </div>
  <% } else { %>
      <div class="inbox" data-inbox-container="sidebar">
        <% inboxRows.forEach((item) => { %>
          <div
            class="inbox__item inbox__item--clickable <%= item.isRead ? 'inbox__item--read' : '' %>"
            data-item-type="<%= item.itemType %>"
            data-item-id="<%= item.itemId %>"
            data-item-title="<%= item.title %>"
            data-item-body="<%= item.body || '' %>"
            data-item-when="<%= item.when %>"
            data-item-status-label="<%= item.statusLabel %>"
          >
            <div class="inbox__title"><%= item.title %></div>
            <% if (item.body) { %>
              <div class="inbox__body"><%= item.body %></div>
            <% } %>
            <div class="inbox__meta">
              <span class="inbox__time"><%= item.when %></span>
              <span class="inbox__pill inbox__pill--<%= item.status %>"><%= item.statusLabel %></span>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>
  </div>

  <div class="sidebar__footer">
    <form action="/logout" method="post">
      <button class="logout" type="submit">
        <i class="fa-solid fa-right-from-bracket"></i>
        Logout
      </button>
    </form>
  </div>
</aside>

<%- include('./inboxModal') %>
